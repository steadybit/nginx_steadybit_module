FROM nginx/nginx-ingress:5.0.0-ubi

# Copy the built module from the build context
COPY dist/ngx_steadybit_sleep_module.so /usr/lib/nginx/modules/

# Optionally, copy a default nginx.conf that loads the module
# COPY nginx.conf /etc/nginx/nginx.conf

# Load the module in nginx.conf (or use a conf.d snippet)
RUN echo "load_module modules/ngx_steadybit_sleep_module.so;" > /etc/nginx/conf.d/load_sleep_module.conf